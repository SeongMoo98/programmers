# 디자인 패턴 소개

디자인 패턴이란 프로그램을 설계할 때 발생했던 문제점들을 객체 간의 상호 관계 등을 이용하여 해결할 수 있도록 하나의 “규약” 형태로 만들어 놓은 것을 의미한다.

## 디자인 패턴의 의의

여러 문제를 해결하는데 있어 영감을 받을 수 있고, 어떤 문제가 나타났을 때 “그 부분은 전략패턴”을 하는게 어떤지 생각해 볼 수 있다.

## 디자인 패턴의 종류

- 생성 패턴 : 객체 생성 방법이 들어간 디자인 패턴
    - 싱글톤, 팩토리, 추상팩토리, 빌더, 프로토 타입 패턴
- 구조 패턴 : 객체, 클래스 등으로 큰 구조를 만들 때 유연하고 효율적으로 만드는 방법이 들어간 디자인 패턴
    - 프록시, 어댑터, 브리지, 복합체, 데코레이터, 퍼사드, 플라이웨이트 패턴
- 행동 패턴 : 객체나 클래스 간의 알고리즘, 책임 할당에 관한 디자인 패턴
    - 이터레이터, 옵저버, 전략, 책임 연쇄, 커맨드, 중재자, 메멘토, 상태, 템플릿메서드, 비지터 패턴

## 라이브러리와 프레임워크의 차이

### 라이브러리

공통으로 사용될 수 있는 특정한 기능들을 모듈화한 것이며, 폴더명, 파일명 등에 대한 규칙이 없고 프레임워크에 비해 자유롭다

필요한 기능을 모아놓은 도구 모음 즉, 개발자가 원하는 때 원하는 방식으로 호출해서 사

### 프레임워크

공통으로 사용될 수 있는 특정한 기능들을 모듈화한 것이며, 폴더명, 파일명 등에 대한 규칙이 있으며 라이브러리에 비해 좀 더 엄격하다

전체 애플리케이션의 뼈대를 제공하고, 그 위에 개발자가 코드를 덧붙이는 방식

|  | **라이브러리** | **프레임워크** |
| --- | --- | --- |
| **제어흐름** | 사용자가 흐름을 제어 | 프레임워크가 제어, 사용자가 필요한 부분만 구현 |
| **사용주체** | 사용자가 라이브러리 호출 | 프레임워크가 코드를 호출 |
| **구성** | 특정 기능을 수행하는 도구 모음 | 전체 구조와 틀을 제공하는 뼈대 |
| **예시** | Numpy, jQuery | Django, Spring |

# 싱글톤 패턴

하나의 클래스에 오직 하나의 인스턴스만 가지는 패턴

### 장점

하나의 인스턴스를 기반으로 해당 인스턴스를 다른 모듈들이 공유하여 사용하기 때문에 인스턴스를 생성할 때 드는 비용이 줄어든다.

그래서 인스턴스 생성 비용이 많이 드는 I/O 바운드 작업에 많이 사용

### 단점

의존성이 높아지며 TDD(Test Driven Development)를 할 때 걸림돌이 된다.

TDD를 할 때 단위 테스트를 주로 하는데, 단위 테스트는 테스트가 서로 독립적이어야 테스트를 어떤 순서로든 실행할 수 있다. 하지만 싱글톤 패턴은 인스턴스를 공유하기 때문에 단위 테스트가 어렵다.

```java
class Singleton {
	private static class singleInstanceHolder {
		// 클래스 인스턴스는 애플리케이션 당 하나만 존재(final)
		private static final Singleton INSTANCE = new Singleton();
	}
	public static Singleton getInstance() {
		return singleInstanceHolder.INSTANCE;
	}
}
public class HelloWorld{
	public static void main(String []args){
		Singleton a = Singleton.getInstance();
		Singleton b = Singleton.getInstance();
		System.out.println(a.hashCode());
		System.out.println(b.hashCode());
		// True
		if (a == b){
			System.out.println(true);
		}
	}
}

```

# DEEP DIVE: 싱글톤 패턴 구현 방법
